// Helper: prettified for future edits
        
        function showGameInterface() {
            setupPanel.classList.add('hidden');
            gameInfoPanel.classList.remove('hidden');
            canvas.classList.remove('hidden');
            gameControls.classList.remove('hidden');
            
            document.getElementById('currentPlayer').textContent = document.getElementById('playerName').value;
            document.getElementById('currentGameId').textContent = gameId;
        }
        
        function showStatus(message) {
            statusMessage.textContent = message;
            statusMessage.classList.remove('hidden');
            setTimeout(() => {
                statusMessage.classList.add('hidden');
            }, 3000);
        }
        
        function updateGameDisplay() {
            // Clear canvas
            ctx.fillStyle = '#111';
            ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
            
            // Draw food
            if (gameState && gameState.food) {
                ctx.fillStyle = '#ff4444';
                ctx.fillRect(
                    gameState.food.x * GRID_SIZE,
                    gameState.food.y * GRID_SIZE,
                    GRID_SIZE - 2,
                    GRID_SIZE - 2
                );
            }
            
            // Draw players
            Object.keys(players).forEach((pid, index) => {
                const player = players[pid];
                if (player.alive && player.snake) {
                    const color = pid === playerId ? '#00ff88' : `hsl(${index * 60}, 70%, 50%)`;
                    drawSnake(player.snake, color);
                    
                    // Update score if it's current player
                    if (pid === playerId) {
                        document.getElementById('playerScore').textContent = player.score;
                    }
                }
            });
            
            // Draw AI players
            Object.keys(aiPlayers).forEach((aiId, index) => {
                const aiPlayer = aiPlayers[aiId];
                if (aiPlayer.snake) {
                    drawSnake(aiPlayer.snake, '#ffaa00');
                }
            });
        }
        
        function drawSnake(snake, color) {
            ctx.fillStyle = color;
            snake.forEach((segment, index) => {
                const alpha = index === 0 ? 1 : 0.8 - (index * 0.1);
                ctx.globalAlpha = Math.max(alpha, 0.3);
                ctx.fillRect(
                    segment.x * GRID_SIZE,
                    segment.y * GRID_SIZE,
                    GRID_SIZE - 2,
                    GRID_SIZE - 2
                );
            });
            ctx.globalAlpha = 1;
        }
        
        // Initial status
        showStatus('Welcome! Create or join a game to start playing.');
        
        socket.on('game_created', (data) => {
            gameId = data.game_id;
            playerId = data.player_id;
            gameState = data.game_state;
            showGameInterface();
            showStatus('Game created! Starting...');
            setTimeout(() => {
                socket.emit('start_game', { game_id: gameId });
            }, 500);
        });
        
        socket.on('game_joined', (data) => {
            gameId = data.game_id;
            playerId = data.player_id;
            gameState = data.game_state;
            showGameInterface();
            showStatus('Joined game! Starting...');
            setTimeout(() => {
                socket.emit('start_game', { game_id: gameId });
            }, 500);
        });
    </script>
</body>
</html>
