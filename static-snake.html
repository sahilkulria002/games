<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=\, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
    .eaten-letter { color: #fff; background: #00ff88; border-radius: 6px; padding: 2px 6px; font-weight: bold; box-shadow: 0 2px 8px #00ff8844; }
    body { margin: 0; }
    canvas { display: block; margin: 0 auto; background: #111; border: 6px solid #00ff88; border-radius: 24px; box-shadow: 0 4px 36px #0088ff33; }
    .btn { padding: 18px 38px; border: none; border-radius: 32px; font-size: 1.35rem; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1.5px; background: linear-gradient(45deg, #00ff88, #0088ff); color: #000; margin: 16px; }
    .score { font-size: 2rem; margin-bottom: 18px; color: #00ff88; }
    label { color: #fff; font-size: 1.35rem; font-weight: bold; }
    input[type="range"] { vertical-align: middle; width: 240px; accent-color: #00ff88; height: 8px; }
    #speedValue { color: #00ff88; font-weight: bold; min-width: 80px; display: inline-block; text-align: center; font-size: 1.3rem; }
    #wordInput { padding: 18px; border-radius: 14px; border: none; width: 100%; height: 340px; font-size: 1.3rem; margin-top: 16px; background: #181c24; color: #fff; box-shadow: 0 4px 18px #0088ff22; resize: vertical; }
    #setWordsBtn { margin-top: 18px; width: 100%; background: linear-gradient(45deg, #00ff88, #0088ff); color: #fff; font-size: 1.2rem; }
    #gameOver { display: none; color: #ff4444; font-size: 2rem; margin-top: 36px; }
    .container { display: flex; height: 100vh; align-items: center; justify-content: center; background: linear-gradient(135deg, #0a0a0a, #1a1a1a); }
    .controls { flex: 0 0 340px; display: flex; flex-direction: column; align-items: flex-end; gap: 38px; padding: 0 36px 0 0; }
    .arena { flex: 0 0 700px; display: flex; flex-direction: column; align-items: center; }
    .wordInputContainer { flex: 0 0 400px; display: flex; flex-direction: column; align-items: flex-start; gap: 38px; padding: 0 0 0 36px; }
    .infoStrip { width: 100%; background: rgba(0,0,0,0.7); border-radius: 18px 18px 0 0; box-shadow: 0 4px 24px #00ff8844; padding: 24px 0 12px 0; margin-bottom: 0; text-align: center; display: flex; justify-content: space-between; align-items: center; }
    .infoStrip span { color: #fff; font-size: 1.5rem; margin: 0 28px; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Left Controls -->
        <div class="controls">
            <div style="background:rgba(0,0,0,0.5); border-radius:16px; box-shadow:0 2px 16px #00ff8844; padding:24px 18px; min-width:200px;">
                <label style="color:#fff; font-size:1.1rem; font-weight:bold;">Speed:
                    <input type="range" id="speedSlider" min="1" max="100" value="50" style="vertical-align:middle; width:120px; accent-color:#00ff88;">
                    <span id="speedValue" style="color:#00ff88; font-weight:bold; min-width:60px; display:inline-block; text-align:center;">1.0</span> <span style="color:#aaa; font-size:0.95em;">steps/sec</span>
                </label>
                <button class="btn" id="edgeBtn" style="margin-top:18px; width:100%; background:linear-gradient(45deg,#0088ff,#00ff88);color:#fff;">Edge: Stiff</button>
                <button class="btn" id="startBtn" style="margin-top:18px; width:100%;">Play Game</button>
                <button class="btn" id="restartBtn" style="display:none; margin-top:12px; width:100%;">Restart</button>
            </div>
        </div>
        <!-- Game Arena Center -->
        <div class="arena">
            <div class="infoStrip">
                <span id="currentWord" style="font-size:1.3rem; color:#00ff88; letter-spacing:2px; font-weight:bold;"></span>
                <span id="wordStatus" style="font-size:1.1rem; color:#fff; margin-left:18px;"></span>
                <span style="color:#fff; font-size:1.1rem; margin-right:18px;">Score: <span id="score">0</span></span>
            </div>
            <canvas id="gameCanvas" width="600" height="600"></canvas>
            <div id="gameOver" style="display:none; color:#ff4444; font-size:1.3rem; margin-top:24px;">Game Over!</div>
        </div>
        <!-- Right: Word Input -->
        <div class="wordInputContainer">
            <div style="background:rgba(0,0,0,0.4); border-radius:16px; box-shadow:0 2px 16px #00ff8844; padding:24px 18px; min-width:220px; max-width:340px;">
                <label for="wordInput" style="color:#00ff88; font-size:1.1rem; font-weight:bold;">Words for Snake Food:</label>
                <textarea id="wordInput" placeholder="Enter words (space or new line separated)" style="padding:14px; border-radius:10px; border:none; width:100%; height:340px; font-size:1.1rem; margin-top:10px; background:#181c24; color:#fff; box-shadow:0 2px 12px #0088ff22;"></textarea>
                <button class="btn" id="setWordsBtn" style="margin-top:14px; width:100%; background:linear-gradient(45deg,#00ff88,#0088ff);color:#fff;">Set Words</button>
            </div>
        </div>
    </div>
    <script>
    // --- JS logic copied from working snake.html ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const gameOverEl = document.getElementById('gameOver');
    // Start Game button handler
    startBtn.onclick = function() {
        resetGame();
        let ms = getStepMs();
        clearInterval(interval);
        interval = setInterval(move, ms);
        startBtn.style.display = 'none';
        restartBtn.style.display = 'inline-block';
    };

    // Restart button handler
    restartBtn.onclick = function() {
        resetGame();
        let ms = getStepMs();
        clearInterval(interval);
        interval = setInterval(move, ms);
        startBtn.style.display = 'none';
        restartBtn.style.display = 'inline-block';
    };
    // Arena/grid size
    const GRID_SIZE = 30; // 30x30 grid for 600x600 canvas
    const CELL_SIZE = 20;
    let snake, dx, dy, score, running, interval;
    let speed = 50; // 1-100
    let words = [];
    let wordIndex = 0;
    let letterIndex = 0;
    let foodLetters = [];
    let edgeMode = 'stiff';
    let pendingDirection = null;
    function resetGame() {
    snake = [{x: Math.floor(GRID_SIZE/2), y: Math.floor(GRID_SIZE/2)}];
    dx = 1; dy = 0;
    score = 0;
    running = true;
    wordIndex = 0;
    letterIndex = 0;
    foodLetters = getFoodLetters();
    scoreEl.textContent = score;
    gameOverEl.style.display = 'none';
    // Hide start button, show restart button
    startBtn.style.display = 'none';
    restartBtn.style.display = 'inline-block';
    updateWordStatus();
    }
    function getFoodLetters() {
        if (!words.length || wordIndex >= words.length) return [];
        let arr = [];
        let used = [];
        let word = words[wordIndex];
        for (let l = 0; l < word.length; l++) {
            let pos = randomFood(used);
            arr.push({
                letter: word[l],
                pos: pos
            });
            used.push(pos);
        }
        return arr;
    }
    function randomFood(avoid=[]) {
        let pos;
        do {
            pos = { x: Math.floor(Math.random()*GRID_SIZE), y: Math.floor(Math.random()*GRID_SIZE) };
        } while (snake.some(s=>s.x===pos.x&&s.y===pos.y) || avoid.some(f=>f.x===pos.x&&f.y===pos.y));
        return pos;
    }
    function draw() {
        ctx.fillStyle = '#111';
        ctx.fillRect(0,0,GRID_SIZE*CELL_SIZE,GRID_SIZE*CELL_SIZE);
        // Draw all food letters for current word (all same style)
        if (foodLetters.length) {
            ctx.font = 'bold 28px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            for (let i = 0; i < foodLetters.length; i++) {
                // Highlight only the boxes of letters that have been eaten
                if (i < letterIndex) {
                    ctx.fillStyle = '#00ff88';
                    ctx.fillRect(foodLetters[i].pos.x*CELL_SIZE+2, foodLetters[i].pos.y*CELL_SIZE+2, CELL_SIZE-4, CELL_SIZE-4);
                    ctx.fillStyle = '#fff';
                } else {
                    ctx.fillStyle = '#ffaa00';
                }
                ctx.fillText(foodLetters[i].letter, foodLetters[i].pos.x*CELL_SIZE+CELL_SIZE/2, foodLetters[i].pos.y*CELL_SIZE+CELL_SIZE/2);
            }
        }
        ctx.fillStyle = '#00ff88';
        snake.forEach((s,i)=>{
            ctx.globalAlpha = 1 - i*0.07;
            ctx.fillRect(s.x*CELL_SIZE+1, s.y*CELL_SIZE+1, CELL_SIZE-2, CELL_SIZE-2);
        });
        ctx.globalAlpha = 1;
    }
    function move() {
    if (!running) return;
        // Apply pending direction if any
        if (pendingDirection) {
            dx = pendingDirection.dx;
            dy = pendingDirection.dy;
            pendingDirection = null;
        }
        let head = {x: snake[0].x+dx, y: snake[0].y+dy};
        if (edgeMode === 'pass') {
            if (head.x < 0) head.x = GRID_SIZE-1;
            if (head.x > GRID_SIZE-1) head.x = 0;
            if (head.y < 0) head.y = GRID_SIZE-1;
            if (head.y > GRID_SIZE-1) head.y = 0;
        }
        if (head.x<0||head.x>=GRID_SIZE||head.y<0||head.y>=GRID_SIZE||snake.some(s=>s.x===head.x&&s.y===head.y)) {
            running = false;
            gameOverEl.style.display = 'block';
            restartBtn.style.display = 'inline-block';
            clearInterval(interval);
            startBtn.style.display = 'inline-block';
            return;
        }
        snake.unshift(head);
        // Word/letter food logic
        if (foodLetters.length) {
            let f = foodLetters[letterIndex];
            if (head.x===f.pos.x && head.y===f.pos.y) {
                letterIndex++;
                score++;
                scoreEl.textContent = score;
                if (letterIndex < foodLetters.length) {
                    // nothing, just go to next letter
                } else {
                    // Next word
                    wordIndex++;
                    letterIndex = 0;
                    foodLetters = getFoodLetters();
                }
                updateWordStatus();
            } else {
                snake.pop();
            }
        } else {
            snake.pop();
        }
        draw();
    }
    function updateWordStatus() {
        const ws = document.getElementById('wordStatus');
        const cw = document.getElementById('currentWord');
        if (!words.length) { ws.textContent = ''; cw.textContent = ''; return; }
        let curr = words[wordIndex] || '';
        // Highlight eaten letters
        let html = '';
        for (let i = 0; i < curr.length; i++) {
            if (i < letterIndex) {
                html += '<span class="eaten-letter">' + curr[i] + '</span>';
            } else {
                html += curr[i];
            }
        }
        ws.innerHTML = 'Next letter: <b>' + (curr[letterIndex]||'') + '</b>';
        cw.innerHTML = 'Current word: <b>' + html + '</b>';
    }
    function getStepMs() {
    // True linear mapping: 1 (0.5 steps/sec) to 100 (20 steps/sec)
    // stepsPerSec = 0.5 + (speed-1)*(19.5/99)
    let stepsPerSec = 0.5 + (speed-1)*(19.5/99);
    return Math.round(1000/stepsPerSec);
    }
    document.getElementById('speedSlider').oninput = (e)=>{
    speed = parseInt(e.target.value);
    let ms = getStepMs();
    // True linear mapping for steps/sec
    let stepsPerSec = (1000/ms).toFixed(2);
    // But for display, use the same formula as above for accuracy
    let displaySteps = (0.5 + (speed-1)*(19.5/99)).toFixed(2);
    document.getElementById('speedValue').textContent = displaySteps;
    if (running) { clearInterval(interval); interval = setInterval(move, ms); }
    };
    document.getElementById('edgeBtn').onclick = ()=>{
        edgeMode = edgeMode === 'stiff' ? 'pass' : 'stiff';
        document.getElementById('edgeBtn').textContent = 'Edge: ' + (edgeMode === 'stiff' ? 'Stiff' : 'Pass Through');
    };
    document.getElementById('setWordsBtn').onclick = ()=>{
        const val = document.getElementById('wordInput').value.trim();
        words = val ? val.split(/\s+|\n+/) : [];
        wordIndex = 0; letterIndex = 0;
        foodLetters = getFoodLetters();
        updateWordStatus();
        draw();
    };
    document.addEventListener('keydown', e=>{
        if (!running) return;
        // Only accept a new direction if no pending direction
        if (pendingDirection) return;
        let newDx = dx, newDy = dy;
        if (e.key==='ArrowUp'&&dy!==1) {newDx=0;newDy=-1;}
        else if (e.key==='ArrowDown'&&dy!==-1) {newDx=0;newDy=1;}
        else if (e.key==='ArrowLeft'&&dx!==1) {newDx=-1;newDy=0;}
        else if (e.key==='ArrowRight'&&dx!==-1) {newDx=1;newDy=0;}
        // Only set if changed
        if (newDx !== dx || newDy !== dy) {
            pendingDirection = {dx: newDx, dy: newDy};
        }
    });
    draw();
    </script>
</body>
</html>
